#include "get_K.h"

// 板凳会轻微转动
// Q = np.diag([600, 1, 5, 1, 1, 1])
// R_mat = np.diag([100, 1])
// float ChassisL_LQR_K[12] =  { -1.64301696, -0.14992515, -0.85214439, -0.97367536, 0.96852200, 0.22696223, 34.21996913, 1.48513016, 5.23306728, 4.15447659, -1.46933968, -0.22338112 };
// float ChassisR_LQR_K[12] =  { -1.64301696, -0.14992515, -0.85214439, -0.97367536, 0.96852200, 0.22696223, 34.21996913, 1.48513016, 5.23306728, 4.15447659, -1.46933968, -0.22338112 };

// 左腿测试正常
// Q = np.diag([1, 1, 100, 1, 1000, 1])
// R_mat = np.diag([10, 1]) 
// float ChassisL_LQR_K[12] =  { -3.40040427, -0.43470493, -2.55244837, -1.67991047, 6.79987889, 0.51566461, 5.83650540, 0.95838773, 5.90339507, 3.75943533, 24.58926978, 0.93786619 };
// float ChassisR_LQR_K[12] =  { -3.40040427, -0.43470493, -2.55244837, -1.67991047, 6.79987889, 0.51566461, 5.83650540, 0.95838773, 5.90339507, 3.75943533, 24.58926978, 0.93786619 };

// 双腿同方向离地
// Q = np.diag([1, 1, 100, 1, 1000, 1])
// R_mat = np.diag([1, 100]) 
// float ChassisL_LQR_K[12] = { -9.89729467, -1.58412154, -9.98816955, -6.27882147, 1.05970154, 0.45041359, 0.22653846, -0.00892277, -0.08878231, -0.06550984, 6.33382788, 0.51059776 };
// float ChassisR_LQR_K[12] = { -9.89729467, -1.58412154, -9.98816955, -6.27882147, 1.05970154, 0.45041359, 0.22653846, -0.00892277, -0.08878231, -0.06550984, 6.33382788, 0.51059776 };

// 双腿同方向离地
// float ChassisL_LQR_K[12] = { -10.20978096, -1.57644224, -9.87390062, -6.31627239, -2.40642826, 0.07609826, 0.17684005, -0.01871580, -0.15830624, -0.10943252, 3.72687301, 0.38021380 };
// float ChassisR_LQR_K[12] = { -10.20978096, -1.57644224, -9.87390062, -6.31627239, -2.40642826, 0.07609826, 0.17684005, -0.01871580, -0.15830624, -0.10943252, 3.72687301, 0.38021380 };

// 勉强站住
// Q = np.diag([1, 1, 30, 1, 2000, 1])
// R_mat = np.diag([100, 1])
// float ChassisL_LQR_K[12] =   { -1.85886133, -0.15720989, -0.38097508, -0.40200704, 3.70280433, 0.30539807, 9.24607883, 1.19437586, 3.93520001, 3.94367574, 29.27150994, 0.59105302 };
// float ChassisR_LQR_K[12] =   { -1.85886133, -0.15720989, -0.38097508, -0.40200704, 3.70280433, 0.30539807, 9.24607883, 1.19437586, 3.93520001, 3.94367574, 29.27150994, 0.59105302 };

// 站立
// Q = np.diag([1, 1, 10, 1, 2000, 1])
// R_mat = np.diag([100, 1]) 
// float ChassisL_LQR_K[12] = { -1.78702951, -0.14724413, -0.22322597, -0.29966946, 3.63846509, 0.29682657, 8.50978033, 1.09223834, 2.23986979, 2.89299819, 29.92784036, 0.67862636 };
// float ChassisR_LQR_K[12] = { -1.78702951, -0.14724413, -0.22322597, -0.29966946, 3.63846509, 0.29682657, 8.50978033, 1.09223834, 2.23986979, 2.89299819, 29.92784036, 0.67862636 };

// x有点晃
// Q = np.diag([1, 1, 100, 1, 2000, 1])
// R_mat = np.diag([100, 1]) 
// float ChassisL_LQR_K[12] = { -1.97259266, -0.17293065, -0.67911779, -0.56411679, 3.80220924, 0.31871893, 10.45648669, 1.36193851, 7.34029313, 5.68172359, 28.21812640, 0.44955057 };
// float ChassisR_LQR_K[12] = { -1.97259266, -0.17293065, -0.67911779, -0.56411679, 3.80220924, 0.31871893, 10.45648669, 1.36193851, 7.34029313, 5.68172359, 28.21812640, 0.44955057 };

// 以上为没有修正转动惯量的参数，下面为已修正的参数

// Q = np.diag([30, 1, 100, 1, 2000, 1])
// R_mat = np.diag([100, 1]) 
// float ChassisL_LQR_K[12] =     { -2.33647421, -0.21081156, -0.87849161, -0.74250485, 2.75285200, 0.19102688, 7.69537749, 0.93227315, 4.77757781, 3.87075519, 37.88178286, 0.87056623 };
// float ChassisR_LQR_K[12] =     { -2.33647421, -0.21081156, -0.87849161, -0.74250485, 2.75285200, 0.19102688, 7.69537749, 0.93227315, 4.77757781, 3.87075519, 37.88178286, 0.87056623 };


// Q = np.diag([100, 1, 300, 1, 2000, 1])
// R_mat = np.diag([100, 1]) 
float ChassisL_LQR_K[12] =  { -2.74133106, -0.25234388, -1.49033108, -1.12717041, 3.00441907, 0.21424817, 10.83915504, 1.20519665, 8.82560642, 6.34208576, 36.29329271, 0.72497479 };
float ChassisR_LQR_K[12] =  { -2.74133106, -0.25234388, -1.49033108, -1.12717041, 3.00441907, 0.21424817, 10.83915504, 1.20519665, 8.82560642, 6.34208576, 36.29329271, 0.72497479 };
float ChassisL_LQR_K_fall[12] = { 0, 0, 0, 0, 0, 0, 10.83915504, 1.20519665, 0, 0, 0, 0 };
float ChassisR_LQR_K_fall[12] = { 0, 0, 0, 0, 0, 0, 10.83915504, 1.20519665, 0, 0, 0, 0 };


// float ChassisL_LQR_K[12] =  { -101.02657505, -1.33179320, -0.25009959, -0.78436925, 0.44359445, 0.06954944, 0.39805902, -0.03841091, -0.09682201, -0.32615576, 1.16657268, 0.17431581 };
// float ChassisR_LQR_K[12] =  { -101.02657505, -1.33179320, -0.25009959, -0.78436925, 0.44359445, 0.06954944, 0.39805902, -0.03841091, -0.09682201, -0.32615576, 1.16657268, 0.17431581 };
// float ChassisL_LQR_K_fall[12] = { 0, 0, 0, 0, 0, 0, 2.79517503, 0.42907118, 0, 0, 0, 0 };
// float ChassisR_LQR_K_fall[12] = { 0, 0, 0, 0, 0, 0, 2.79517503, 0.42907118, 0, 0, 0, 0 };
float ChassisL_LQR_K_err[12] = { 0, 0, 0, 0, 0, 0, 0, 1156.16179043, 0, 0, 0, 0 };
float ChassisR_LQR_K_err[12] = { 0, 0, 0, 0, 0, 0, 0, 1156.16179043, 0, 0, 0, 0 };